
var XOBackgroundMediaUploader,XOSetBackgroundHTML,XORemoveBackground,XOSetAsBackground;(function(a){XOBackgroundMediaUploader=function(c){var b=this,g=wp.media.frames.file_frame;this.settings={uploader_title:"",uploader_button_text:"",id:"",selector:false,cb:function(h){}};this.attachEvents=function d(){a(this.settings.selector).on("click",this.openFrame)};this.openFrame=function e(h){h.preventDefault();g=wp.media.frames.file_frame=wp.media({title:b.settings.uploader_title,button:{text:b.settings.uploader_button_text},multiple:false,library:{type:"image"}});g.on("toolbar:create:select",function(){g.state().set("filterable","uploaded")});g.on("select",function(){var i=g.state().get("selection").first().toJSON();b.settings.cb(i)});g.on("open activate",function(){var i=a(b.settings.selector);if(b.settings.id!==""){var k=wp.media.model.Attachment;var j=g.state().get("selection");j.add(k.get(b.settings.id))}});g.open()};this.init=function f(){this.settings=a.extend(this.settings,c);this.attachEvents()};this.init();return this};XOSetBackgroundHTML=function(b){a(".inside","#postbackgrounddiv").html(b)};XORemoveBackground=function(c,b){a.post(ajaxurl,{action:"set-post-background",post_id:c,background_id:-1,_ajax_nonce:b,cookie:encodeURIComponent(document.cookie)},function(d){if(d=="0"){alert(setPostThumbnailL10n.error)}else{XOSetBackgroundHTML(d)}})};XOSetAsBackground=function(b,e,d){var c=a("a#set-post-background");c.text(setPostThumbnailL10n.saving);a.post(ajaxurl,{action:"set-post-background",post_id:e,background_id:b,_ajax_nonce:d,cookie:encodeURIComponent(document.cookie)},function(g){var f=window.dialogArguments||opener||parent||top;c.text(setPostThumbnailL10n.setThumbnail);if(g=="0"){alert(setPostThumbnailL10n.error)}else{c.show();c.text(setPostThumbnailL10n.done);c.fadeOut(2000);f.XOSetBackgroundHTML(g)}})}}(jQuery));